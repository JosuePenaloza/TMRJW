<Window x:Class="TMRJW.AjustesWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Ajustes y Configuración" Height="520" Width="520"
        WindowStartupLocation="CenterScreen"
        Background="#2D2D30"
        Loaded="AjustesWindow_Loaded">

    <!-- Usamos DockPanel para fijar el botón Guardar abajo -->
    <DockPanel Margin="12">
        <!-- Botón Guardar pegado abajo -->
        <Button x:Name="BtnGuardarAjustes"
                DockPanel.Dock="Bottom"
                Content="Guardar y Cerrar"
                Height="44"
                Background="#4CAF50"
                Foreground="White"
                Margin="0,8,0,0"
                Click="BtnGuardarAjustes_SaveClick"/>

        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
            <StackPanel Margin="8">
                <TextBlock Text="CONFIGURACIÓN GLOBAL Y PROYECCIÓN" Foreground="White" FontSize="20" FontWeight="Bold" Margin="0,0,0,15"/>

                <TextBlock Text="Imagen del Texto del Año (Pantalla de Fondo)" Foreground="LightGray" Margin="0,0,0,5"/>
                <Grid Margin="0,0,0,15">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <TextBox x:Name="TxtImagenTextoAnioRuta" Grid.Column="0" 
                             Background="#444444" Foreground="White" IsReadOnly="True" 
                             Margin="0,0,5,0" Text="{Binding ImagenTextoAnio, Mode=OneWay}" />

                    <Button x:Name="BtnSeleccionarImagen" Grid.Column="1" Content="Buscar..." 
                            Width="80" Margin="0,0,5,0" Click="BtnSeleccionarImagen_Click" />

                    <Button x:Name="BtnBorrarImagen" Grid.Column="2" Content="🗑️ Borrar" 
                            Width="80" Background="#FF5733" Foreground="White" 
                            Click="BtnBorrarImagen_Click"/>
                </Grid>

                <!-- NUEVO: Borrar caché -->
                <Button x:Name="BtnBorrarCache"
                        Content="🗑️ Borrar caché de imágenes"
                        Height="30"
                        Background="#E53935"
                        Foreground="White"
                        Margin="0,0,0,15"
                        Click="BtnBorrarCache_Click"/>

                <TextBlock Text="Monitor de Salida" Foreground="LightGray" Margin="0,0,0,5"/>
                <ComboBox x:Name="CboMonitorSalida" Margin="0,0,0,15"/>

                <!-- Ruta a FFmpeg -->
                <TextBlock Text="Ruta a FFmpeg (carpeta bin de x64)" Foreground="LightGray" Margin="0,0,0,5"/>
                <Grid Margin="0,0,0,15">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <TextBox x:Name="TxtFfmpegPath" Grid.Column="0" Background="#444444" Foreground="White" IsReadOnly="True" Margin="0,0,5,0" Text="{Binding FfmpegPath, Mode=OneWay}" />
                    <Button x:Name="BtnSeleccionarFfmpeg" Grid.Column="1" Content="Buscar..." Width="80" Click="BtnSeleccionarFfmpeg_Click" />
                </Grid>

                <TextBlock Text="Administración de Semanas" Foreground="LightGray" Margin="0,0,0,5"/>
                <Button x:Name="BtnBorrarSemanaActual" 
                        Content="Borrar el Programa de la Semana Actual" 
                        Height="30" 
                        Background="#FF5733" 
                        Foreground="White" 
                        Margin="0,0,0,20" 
                        Click="BtnBorrarSemanaActual_Click"/>
            </StackPanel>
        </ScrollViewer>
    </DockPanel>
</Window>